dist: bionic
language: java

matrix:
   include:
      #coveralls plugin doesn't work with jdk 11 for some reasons
      - jdk: openjdk8
        env: MAVEN_ARGS="coveralls:report"
      #sonarcloud requires jdk 11 or newer       
      - jdk: openjdk11
        env: MAVEN_ARGS="sonar:sonar -Dsonar.projectKey=Predictabowl_APT-Project-Aldinucci"



addons:
   sonarcloud:
      organization: "predictabowl"
      token: $SONAR_TOKEN

services:
   - docker

#skip installation step
install: true

cache:
   directories:
      - .autoconf
      - $HOME/.m2
      - $HOME/.sonar/cache
      
      
script:
   #- ./travis-build
#   - mvn -f bookstore-core/pom.xml clean verify org.pitest:pitest-maven:mutationCoverage $MAVEN_ARGS
#   - mvn -f bookstore-core/pom.xml clean verify -Pjacoco $MAVEN_ARGS
    - mvn -f bookstore-parent/pom.xml verify -Pjacoco $MAVEN_ARGS